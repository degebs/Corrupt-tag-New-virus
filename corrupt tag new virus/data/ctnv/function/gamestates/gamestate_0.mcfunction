
#██████╗ ██████╗ ███████╗ ██████╗  █████╗ ███╗   ███╗███████╗     ██████╗ 
#██╔══██╗██╔══██╗██╔════╝██╔════╝ ██╔══██╗████╗ ████║██╔════╝    ██╔═████╗
#██████╔╝██████╔╝█████╗  ██║  ███╗███████║██╔████╔██║█████╗      ██║██╔██║
#██╔═══╝ ██╔══██╗██╔══╝  ██║   ██║██╔══██║██║╚██╔╝██║██╔══╝      ████╔╝██║
#██║     ██║  ██║███████╗╚██████╔╝██║  ██║██║ ╚═╝ ██║███████╗    ╚██████╔╝
#╚═╝     ╚═╝  ╚═╝╚══════╝ ╚═════╝ ╚═╝  ╚═╝╚═╝     ╚═╝╚══════╝     ╚═════╝ 
                                                                         
#in gamestate 0 the party leader is in FULL CONTROLL of the game
# the only thing the other players can do is nothing.
# if a player does not choose a map one will be selected for them. 

#the party leader can
#1. start the game
#2. change settings
#3. change maps

#in gamestate 0 we need to detect
#1. the party leaders inputs
#2. all the map beacons

#==============================================================================================================
# there is a glitch where players die in real life and then respawn in the lobby midgame. this cannot happen
execute if score tick time matches 2 as @e[tag=lobby] at @s run setworldspawn ~ ~ ~
execute if score tick time matches 2 as @e[tag=lobby] at @s run spawnpoint @a ~ ~ ~

#==============================================================================================================

#to ensure that the game does not permanenty crash a failsafe will be here
kill @e[type=pig]
scoreboard players enable degebs revenge


#--------------------just a bit of fun particle work-----------------------
execute at @a[team=party_lead] run particle end_rod ~ ~0.5 ~ 0 0.2 0 0.03 1
effect give @a[team=party_lead] glowing 1 1 true


# THERE NEEDS TO BE A CHECK IF THE PARTY LEADER DISCONNECTS
scoreboard players set party_leader_online players_online 0
execute as @a[team=party_lead] run scoreboard players add party_leader_online players_online 1
scoreboard players operation Online playerlist = party_leader_online players_online
execute if score party_leader_online players_online matches 0 run function ctnv:one_time_function/party_leader/party_leader

# do a check if there are too many party leaders

execute if score party_leader_online players_online matches 2.. run team leave @a
execute if score party_leader_online players_online matches 2.. run clear @a
execute if score party_leader_online players_online matches 2.. run function ctnv:one_time_function/party_leader/party_leader

#===========================================================================================================
#========check if the party leader dropped the starting dye ENSURE THERE ARE AT LEAST 2 PLAYERS


#==================================================
#after that we will make a variable that declare that this game will have (X) ammount of player
# this logic will be usefull when in gamestate 1 where if ANY player leaves it will trigger a panic and restart the datapack
scoreboard players operation players_waiting players_online = Online players_online 

#the problem is that when the dye is initially given it is summoned inside the player before he grabs it, causing it to exist in a droped state triggering this code
# before its supost to function. there needs to be a delay so that this code does not automaticall function
#i moved all the logic for drop detection to a seprate fumction so that a delay can be set
execute unless score drop_detect_function_Delay time matches 0 run scoreboard players remove drop_detect_function_Delay time 1
execute if score drop_detect_function_Delay time matches 0 run function ctnv:start_game_item_delay



#======================================================================================================
#here is where we check if the party leader dropped the map selector end crystal, we face the exact same problem as the dye
# the item is summoned inside the player before he grabs it, causing it to exist in a droped state triggering this code
# before its supost to function. there needs to be a delay so that this code does not automaticall function
execute if entity @e[type=item,nbt={Item:{id:"minecraft:end_crystal"}}] if score drop_detect_function_Delay time matches 0 run function ctnv:one_time_function/map_selector





#======================================================================================================
#make sure only the party leader gets to use the /trigger commands on the settings 
# the book is not entirely needed but it is a nice touch, especially if you do not wnat to type each command just to mess with the settings
#the fist thing we must do is enable the /trigger commands for the party leader
# there is a secret in this system... what if i told you that the party leader can set any of the settings to an arbitrary value? # this is because the /trigger command has no limits, the only limit is the book. if the party leader knows the commands he can set it to something like 1000000000000000000. that would be funny, thankfully everyone in the testing group is a good sport and will not do that. but if you are reading this and you are not in the testing group, then you can do is to stupid to relise this.
scoreboard players enable @a[team=party_lead] ST____corruption_rate
scoreboard players enable @a[team=party_lead] ST____game_mode
scoreboard players enable @a[team=party_lead] ST____max_health
scoreboard players enable @a[team=party_lead] ST____nautral_regen
scoreboard players enable @a[team=party_lead] ST____time_of_day
scoreboard players enable @a[team=party_lead] ST____initial_corruption_stun
scoreboard players enable @a[team=party_lead] ST____max_traps
scoreboard players enable @a[team=party_lead] ST____target_tubby_detection
scoreboard players enable @a[team=party_lead] ST____runner_name_tags
scoreboard players enable @a[team=party_lead] ST____COC_difuculty
scoreboard players enable @a[team=party_lead] ST____enable_runner_classes
scoreboard players enable @a[team=party_lead] ST____locator_bar

# oh by the way "ST____" is short for "settings"


# now its time to have the settings that the party leader sets to actually do something. (not every setting will have an effect in gamestate 0)
#1. time of day
execute if score @r[team=party_lead] ST____time_of_day matches 0 run time set noon
execute if score @r[team=party_lead] ST____time_of_day matches 1 run time set midnight

# identify trap limit 
# this command should be in the gamestate 0 function
execute as @a[team=party_lead] run scoreboard players operation limit trap_stats = @s ST____max_traps


#==========================================================================================
# the party leader may NOT drop the settings book, give it back to him if he does drop it

execute unless entity @s[nbt={Inventory:[{id:"minecraft:written_book",Slot:2b}]}] run clear @s written_book

execute unless entity @s[nbt={Inventory:[{id:"minecraft:written_book",Slot:2b}]}] run kill @e[type=item,nbt={Item:{id:"minecraft:written_book"}}]


# the party leader may have diffrent settings books depecting on game mode

# corrupt tag game mode book
execute unless entity @s[nbt={Inventory:[{id:"minecraft:written_book",Slot:2b}]}] if score setting ST____game_mode matches 0 run item replace entity @a[team=party_lead] hotbar.2 with written_book[written_book_content={pages:[[[{"text":"Time of day","color":"gold"},"\n",{"text":"Day","color":"aqua","click_event":{"action":"run_command","command":"/trigger ST____time_of_day set 0"},"hover_event":{"action":"show_text","value":"set the time do day"}}," ",{"text":"Night","color":"gray","click_event":{"action":"run_command","command":"/trigger ST____time_of_day set 1"},"hover_event":{"action":"show_text","value":"set the time to night"}},"\n\n",{"text":"Corruption rate","color":"dark_purple","hover_event":{"action":"show_text","value":"how fast does the corruption accumulate "}},"\n",{"text":"1","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 1"},"hover_event":{"action":"show_text","value":"1 corruption % per 1 second"}},{"text":" ","color":"dark_purple"},{"text":"2","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 2"},"hover_event":{"action":"show_text","value":"1 corruption % per 2 second"}},{"text":" ","color":"dark_purple"},{"text":"3","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 3"},"hover_event":{"action":"show_text","value":"1 corruption % per 3 second"}},{"text":" ","color":"dark_purple"},{"text":"4","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 4"},"hover_event":{"action":"show_text","value":"1 corruption % per 4 second"}},{"text":" ","color":"dark_purple"},{"text":"5","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 5"},"hover_event":{"action":"show_text","value":"1 corruption % per 5 second"}},{"text":" ","color":"dark_purple"},{"text":"6","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 6"},"hover_event":{"action":"show_text","value":"1 corruption % per 6 second"}},{"text":" ","color":"dark_purple"},{"text":"7","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 7"},"hover_event":{"action":"show_text","value":"1 corruption % per 7 second"}},{"text":" ","color":"dark_purple"},{"text":"8","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 8"},"hover_event":{"action":"show_text","value":"1 corruption % per 8 second"}},{"text":" ","color":"dark_purple"},{"text":"9","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 9"},"hover_event":{"action":"show_text","value":"1 corruption % per 9 second"}},{"text":" ","color":"dark_purple"},{"text":"10","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 10"},"hover_event":{"action":"show_text","value":"1 corruption % per 10 second"}},"\n\n",{"text":"Corruption stun","color":"light_purple","hover_event":{"action":"show_text","value":"a player who gets corrupted starts in a stunned state. how long is it?"}},"\n",{"text":"1 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 1"},"hover_event":{"action":"show_text","value":"1 second stun"}},{"text":"2","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 2"},"hover_event":{"action":"show_text","value":"2 second stun"}},{"text":" ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 2"},"hover_event":{"action":"show_text","value":"2 second stun"}},{"text":"3 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 3"},"hover_event":{"action":"show_text","value":"3 second stun"}},{"text":"4 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 4"},"hover_event":{"action":"show_text","value":"4 second stun"}},{"text":"5 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 5"},"hover_event":{"action":"show_text","value":"5 second stun"}},{"text":"6 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 6"},"hover_event":{"action":"show_text","value":"6 second stun"}},{"text":"7 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 7"},"hover_event":{"action":"show_text","value":"7 second stun"}},{"text":"8 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 8"},"hover_event":{"action":"show_text","value":"8 second stun"}},{"text":"9 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 9"},"hover_event":{"action":"show_text","value":"9 second stun"}},{"text":"10","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 10"},"hover_event":{"action":"show_text","value":"10 second stun"}},"\n\n",{"text":"Max health","color":"red","hover_event":{"action":"show_text","value":"how many hearts do the runners get?"}},"\n",{"text":"1 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 1"},"hover_event":{"action":"show_text","value":"one"}},{"text":"2 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 2"},"hover_event":{"action":"show_text","value":"two"}},{"text":"3 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 3"},"hover_event":{"action":"show_text","value":"three"}},{"text":"4 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 4"},"hover_event":{"action":"show_text","value":"four"}},{"text":"5 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 5"},"hover_event":{"action":"show_text","value":"five"}},{"text":"6 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 6"},"hover_event":{"action":"show_text","value":"six"}},{"text":"7 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 7"},"hover_event":{"action":"show_text","value":"seven"}},{"text":"8 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 8"},"hover_event":{"action":"show_text","value":"eight"}},{"text":"9 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 9"},"hover_event":{"action":"show_text","value":"nine"}},{"text":"10","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 10"},"hover_event":{"action":"show_text","value":"ten"}},"\n\n",{"text":"Regeneration","color":"dark_aqua","hover_event":{"action":"show_text","value":"do hearts slowly regenerate over time?"}},"\n",{"text":"on","color":"dark_green","click_event":{"action":"run_command","command":"/trigger ST____nautral_regen set 0"},"hover_event":{"action":"show_text","value":"on"}},{"text":" ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____nautral_regen set 0"},"hover_event":{"action":"show_text","value":"on"}},{"text":"off","click_event":{"action":"run_command","command":"/trigger ST____nautral_regen set 1"},"hover_event":{"action":"show_text","value":"off"}}," "]],[[{"text":"max traps","color":"red","hover_event":{"action":"show_text","value":"the maximum amount of traps you can place"}},"\n",{"text":"0","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 0"},"hover_event":{"action":"show_text","value":"no traps"}},{"text":" ","color":"dark_blue"},{"text":"1","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 1"},"hover_event":{"action":"show_text","value":"1 trap"}},{"text":" ","color":"dark_blue"},{"text":"2","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 2"},"hover_event":{"action":"show_text","value":"2 traps"}},{"text":" ","color":"dark_blue"},{"text":"3","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 3"},"hover_event":{"action":"show_text","value":"3 traps"}},{"text":" ","color":"dark_blue"},{"text":"4","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 4"},"hover_event":{"action":"show_text","value":"4 traps"}},{"text":" ","color":"dark_blue"},{"text":"5","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 5"},"hover_event":{"action":"show_text","value":"5 traps"}},{"text":" ","color":"dark_blue"},{"text":"6","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 6"},"hover_event":{"action":"show_text","value":"6 traps"}},{"text":" ","color":"dark_blue"},{"text":"7","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 7"},"hover_event":{"action":"show_text","value":"7 traps"}},{"text":" ","color":"dark_blue"},{"text":"8","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 8"},"hover_event":{"action":"show_text","value":"8 traps"}},{"text":" ","color":"dark_blue"},{"text":"9","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 9"},"hover_event":{"action":"show_text","value":"9 traps (why)"}}, "\n\n",{"text":"Locator bar","color":"gold","hover_event":{"action":"show_text","value":"Enable or disable the locator bar for runners."}},"\n",{"text":"enabled","color":"dark_green","click_event":{"action":"run_command","command":"/trigger ST____locator_bar set 1"},"hover_event":{"action":"show_text","value":"Enable locator bar"}},{"text":" ","color":"gray"},{"text":"disabled","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____locator_bar set 0"},"hover_event":{"action":"show_text","value":"Disable locator bar"}}, "\n\n",{"text":"Target tubby detection","color":"dark_red","hover_event":{"action":"show_text","value":"when a corrupted player goes after 1 specific runner over and over again. he is considered a \"target tubby\" this behavior is cringe and should be punished. how harsh are these punishments? "}},"\n",{"text":"off","click_event":{"action":"run_command","command":"/trigger ST____target_tubby_detection set 0"},"hover_event":{"action":"show_text","value":"no target tubby detection"}}," ",{"text":"minor","color":"blue","click_event":{"action":"run_command","command":"/trigger ST____target_tubby_detection set 1"},"hover_event":{"action":"show_text","value":"small penalty for targeting"}}," ",{"text":"major","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____target_tubby_detection set 2"},"hover_event":{"action":"show_text","value":"significant penalty for targeting"}}," ",{"text":"MAX","color":"red","click_event":{"action":"run_command","command":"/trigger ST____target_tubby_detection set 3"},"hover_event":{"action":"show_text","value":"genuinely unfair punishment for targeting"}}]]],title:"Corrupt tag Settings",author:"degebs and the giggle touch foundation"}]

# hide and reap game mode book 
execute unless entity @s[nbt={Inventory:[{id:"minecraft:written_book",Slot:2b}]}] if score setting ST____game_mode matches 1 run item replace entity @a[team=party_lead] hotbar.2 with written_book[written_book_content={pages:[[[{"text":"Time of day","color":"gold"},"\n",{"text":"Day","color":"aqua","click_event":{"action":"run_command","command":"/trigger ST____time_of_day set 0"},"hover_event":{"action":"show_text","value":"set the time do day"}}," ",{"text":"Night","color":"gray","click_event":{"action":"run_command","command":"/trigger ST____time_of_day set 1"},"hover_event":{"action":"show_text","value":"set the time to night"}},"\n\n",{"text":"Corruption rate","color":"dark_purple","hover_event":{"action":"show_text","value":"how fast does the corruption accumulate "}},"\n",{"text":"1","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 1"},"hover_event":{"action":"show_text","value":"1 corruption % per 1 second"}},{"text":" ","color":"dark_purple"},{"text":"2","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 2"},"hover_event":{"action":"show_text","value":"1 corruption % per 2 second"}},{"text":" ","color":"dark_purple"},{"text":"3","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 3"},"hover_event":{"action":"show_text","value":"1 corruption % per 3 second"}},{"text":" ","color":"dark_purple"},{"text":"4","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 4"},"hover_event":{"action":"show_text","value":"1 corruption % per 4 second"}},{"text":" ","color":"dark_purple"},{"text":"5","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 5"},"hover_event":{"action":"show_text","value":"1 corruption % per 5 second"}},{"text":" ","color":"dark_purple"},{"text":"6","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 6"},"hover_event":{"action":"show_text","value":"1 corruption % per 6 second"}},{"text":" ","color":"dark_purple"},{"text":"7","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 7"},"hover_event":{"action":"show_text","value":"1 corruption % per 7 second"}},{"text":" ","color":"dark_purple"},{"text":"8","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 8"},"hover_event":{"action":"show_text","value":"1 corruption % per 8 second"}},{"text":" ","color":"dark_purple"},{"text":"9","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 9"},"hover_event":{"action":"show_text","value":"1 corruption % per 9 second"}},{"text":" ","color":"dark_purple"},{"text":"10","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 10"},"hover_event":{"action":"show_text","value":"1 corruption % per 10 second"}},"\n\n",{"text":"Corruption stun","color":"light_purple","hover_event":{"action":"show_text","value":"a player who gets corrupted starts in a stunned state. how long is it?"}},"\n",{"text":"1 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 1"},"hover_event":{"action":"show_text","value":"1 second stun"}},{"text":"5 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 5"},"hover_event":{"action":"show_text","value":"5 second stun"}},{"text":"10 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 10"},"hover_event":{"action":"show_text","value":"10 second stun"}},{"text":"20 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 20"},"hover_event":{"action":"show_text","value":"20 second stun"}},{"text":"30 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 30"},"hover_event":{"action":"show_text","value":"30 second stun"}},{"text":"40 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 40"},"hover_event":{"action":"show_text","value":"40 second stun"}},{"text":"50 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 50"},"hover_event":{"action":"show_text","value":"50 second stun"}},{"text":"60 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 60"},"hover_event":{"action":"show_text","value":"60 second stun"}},{"text":"70 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 70"},"hover_event":{"action":"show_text","value":"70 second stun"}},{"text":"80","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 80"},"hover_event":{"action":"show_text","value":"80 second stun"}},"\n\n",{"text":"Max health","color":"red","hover_event":{"action":"show_text","value":"how many hearts do the runners get?"}},"\n",{"text":"1 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 1"},"hover_event":{"action":"show_text","value":"one"}},{"text":"2 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 2"},"hover_event":{"action":"show_text","value":"two"}},{"text":"3 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 3"},"hover_event":{"action":"show_text","value":"three"}},{"text":"4 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 4"},"hover_event":{"action":"show_text","value":"four"}},{"text":"5 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 5"},"hover_event":{"action":"show_text","value":"five"}},{"text":"6 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 6"},"hover_event":{"action":"show_text","value":"six"}},{"text":"7 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 7"},"hover_event":{"action":"show_text","value":"seven"}},{"text":"8 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 8"},"hover_event":{"action":"show_text","value":"eight"}},{"text":"9 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 9"},"hover_event":{"action":"show_text","value":"nine"}},{"text":"10","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 10"},"hover_event":{"action":"show_text","value":"ten"}}]],[[{"text":"max traps","color":"red","hover_event":{"action":"show_text","value":"the maximum amount of traps you can place"}},"\n",{"text":"0","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 0"},"hover_event":{"action":"show_text","value":"no traps"}},{"text":" ","color":"dark_blue"},{"text":"1","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 1"},"hover_event":{"action":"show_text","value":"1 trap"}},{"text":" ","color":"dark_blue"},{"text":"2","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 2"},"hover_event":{"action":"show_text","value":"2 traps"}},{"text":" ","color":"dark_blue"},{"text":"3","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 3"},"hover_event":{"action":"show_text","value":"3 traps"}},{"text":" ","color":"dark_blue"},{"text":"4","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 4"},"hover_event":{"action":"show_text","value":"4 traps"}},{"text":" ","color":"dark_blue"},{"text":"5","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 5"},"hover_event":{"action":"show_text","value":"5 traps"}},{"text":" ","color":"dark_blue"},{"text":"6","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 6"},"hover_event":{"action":"show_text","value":"6 traps"}},{"text":" ","color":"dark_blue"},{"text":"7","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 7"},"hover_event":{"action":"show_text","value":"7 traps"}},{"text":" ","color":"dark_blue"},{"text":"8","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 8"},"hover_event":{"action":"show_text","value":"8 traps"}},{"text":" ","color":"dark_blue"},{"text":"9","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 9"},"hover_event":{"action":"show_text","value":"9 traps (why)"}}, "\n\n",{"text":"Regeneration","color":"dark_aqua","hover_event":{"action":"show_text","value":"do hearts slowly regenerate over time?"}},"\n",{"text":"on","color":"dark_green","click_event":{"action":"run_command","command":"/trigger ST____nautral_regen set 0"},"hover_event":{"action":"show_text","value":"on"}},{"text":" ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____nautral_regen set 0"},"hover_event":{"action":"show_text","value":"on"}},{"text":"off","click_event":{"action":"run_command","command":"/trigger ST____nautral_regen set 1"},"hover_event":{"action":"show_text","value":"off"}}, "\n\n",{"text":"Runner name tags","color":"green","hover_event":{"action":"show_text","value":"Should runners have visible name tags?"}},"\n",{"text":"disabed","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____runner_name_tags set 1"},"hover_event":{"action":"show_text","value":"Hide runner name tags"}},{"text":" ","color":"gray"},{"text":"enabled","color":"dark_green","click_event":{"action":"run_command","command":"/trigger ST____runner_name_tags set 0"},"hover_event":{"action":"show_text","value":"Show runner name tags"}}, "\n\n",{"text":"Runner classes","color":"blue","hover_event":{"action":"show_text","value":"Enable or disable runner classes."}},"\n",{"text":"disabled","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____enable_runner_classes set 0"},"hover_event":{"action":"show_text","value":"Disable runner classes"}},{"text":" ","color":"gray"},{"text":"enabled","color":"dark_green","click_event":{"action":"run_command","command":"/trigger ST____enable_runner_classes set 1"},"hover_event":{"action":"show_text","value":"Enable runner classes"}}, "\n\n",{"text":"Locator bar","color":"gold","hover_event":{"action":"show_text","value":"Enable or disable the locator bar for runners."}},"\n",{"text":"enabled","color":"dark_green","click_event":{"action":"run_command","command":"/trigger ST____locator_bar set 1"},"hover_event":{"action":"show_text","value":"Enable locator bar"}},{"text":" ","color":"gray"},{"text":"disabled","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____locator_bar set 0"},"hover_event":{"action":"show_text","value":"Disable locator bar"}}]]],title:"hide and reap Settings",author:"degebs and the giggle touch foundation"}]

# cracked it game mode book
execute unless entity @s[nbt={Inventory:[{id:"minecraft:written_book",Slot:2b}]}] if score setting ST____game_mode matches 2 run item replace entity @a[team=party_lead] hotbar.2 with written_book[written_book_content={pages:[[[{"text":"Time of day","color":"gold"},"\n",{"text":"Day","color":"aqua","click_event":{"action":"run_command","command":"/trigger ST____time_of_day set 0"},"hover_event":{"action":"show_text","value":"set the time do day"}}," ",{"text":"Night","color":"gray","click_event":{"action":"run_command","command":"/trigger ST____time_of_day set 1"},"hover_event":{"action":"show_text","value":"set the time to night"}},"\n\n",{"text":"Corruption rate","color":"dark_purple","hover_event":{"action":"show_text","value":"how fast does the corruption accumulate. this also applies to runners though only 1/4th as bad "}},"\n",{"text":"1","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 1"},"hover_event":{"action":"show_text","value":"4 corruption % per 1 second"}},{"text":" ","color":"dark_purple"},{"text":"2","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 2"},"hover_event":{"action":"show_text","value":"4 corruption % per 2 second"}},{"text":" ","color":"dark_purple"},{"text":"3","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 3"},"hover_event":{"action":"show_text","value":"4 corruption % per 3 second"}},{"text":" ","color":"dark_purple"},{"text":"4","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 4"},"hover_event":{"action":"show_text","value":"4 corruption % per 4 second"}},{"text":" ","color":"dark_purple"},{"text":"5","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 5"},"hover_event":{"action":"show_text","value":"4 corruption % per 5 second"}},{"text":" ","color":"dark_purple"},{"text":"6","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 6"},"hover_event":{"action":"show_text","value":"4 corruption % per 6 second"}},{"text":" ","color":"dark_purple"},{"text":"7","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 7"},"hover_event":{"action":"show_text","value":"4 corruption % per 7 second"}},{"text":" ","color":"dark_purple"},{"text":"8","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 8"},"hover_event":{"action":"show_text","value":"4 corruption % per 8 second"}},{"text":" ","color":"dark_purple"},{"text":"9","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 9"},"hover_event":{"action":"show_text","value":"4 corruption % per 9 second"}},{"text":" ","color":"dark_purple"},{"text":"10","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 10"},"hover_event":{"action":"show_text","value":"4 corruption % per 10 second"}},"\n\n",{"text":"Corruption stun","color":"light_purple","hover_event":{"action":"show_text","value":"a player who gets corrupted starts in a stunned state. how long is it?"}},"\n",{"text":"1 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 1"},"hover_event":{"action":"show_text","value":"1 second stun"}},{"text":"2","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 2"},"hover_event":{"action":"show_text","value":"2 second stun"}},{"text":" ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 2"},"hover_event":{"action":"show_text","value":"2 second stun"}},{"text":"3 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 3"},"hover_event":{"action":"show_text","value":"3 second stun"}},{"text":"4 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 4"},"hover_event":{"action":"show_text","value":"4 second stun"}},{"text":"5 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 5"},"hover_event":{"action":"show_text","value":"5 second stun"}},{"text":"6 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 6"},"hover_event":{"action":"show_text","value":"6 second stun"}},{"text":"7 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 7"},"hover_event":{"action":"show_text","value":"7 second stun"}},{"text":"8 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 8"},"hover_event":{"action":"show_text","value":"8 second stun"}},{"text":"9 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 9"},"hover_event":{"action":"show_text","value":"9 second stun"}},{"text":"10","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 10"},"hover_event":{"action":"show_text","value":"10 second stun"}},"\n\n",{"text":"Max health","color":"red","hover_event":{"action":"show_text","value":"how many hearts do the runners get?"}},"\n",{"text":"1 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 1"},"hover_event":{"action":"show_text","value":"one"}},{"text":"2 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 2"},"hover_event":{"action":"show_text","value":"two"}},{"text":"3 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 3"},"hover_event":{"action":"show_text","value":"three"}},{"text":"4 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 4"},"hover_event":{"action":"show_text","value":"four"}},{"text":"5 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 5"},"hover_event":{"action":"show_text","value":"five"}},{"text":"6 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 6"},"hover_event":{"action":"show_text","value":"six"}},{"text":"7 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 7"},"hover_event":{"action":"show_text","value":"seven"}},{"text":"8 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 8"},"hover_event":{"action":"show_text","value":"eight"}},{"text":"9 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 9"},"hover_event":{"action":"show_text","value":"nine"}},{"text":"10","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 10"},"hover_event":{"action":"show_text","value":"ten"}},"\n\n",{"text":"Regeneration","color":"dark_aqua","hover_event":{"action":"show_text","value":"do hearts slowly regenerate over time?"}},"\n",{"text":"on","color":"dark_green","click_event":{"action":"run_command","command":"/trigger ST____nautral_regen set 0"},"hover_event":{"action":"show_text","value":"on"}},{"text":" ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____nautral_regen set 0"},"hover_event":{"action":"show_text","value":"on"}},{"text":"off","click_event":{"action":"run_command","command":"/trigger ST____nautral_regen set 1"},"hover_event":{"action":"show_text","value":"off"}}," "]],[[{"text":"max traps","color":"red","hover_event":{"action":"show_text","value":"the maximum amount of traps you can place"}},"\n",{"text":"0","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 0"},"hover_event":{"action":"show_text","value":"no traps"}},{"text":" ","color":"dark_blue"},{"text":"1","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 1"},"hover_event":{"action":"show_text","value":"1 trap"}},{"text":" ","color":"dark_blue"},{"text":"2","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 2"},"hover_event":{"action":"show_text","value":"2 traps"}},{"text":" ","color":"dark_blue"},{"text":"3","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 3"},"hover_event":{"action":"show_text","value":"3 traps"}},{"text":" ","color":"dark_blue"},{"text":"4","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 4"},"hover_event":{"action":"show_text","value":"4 traps"}},{"text":" ","color":"dark_blue"},{"text":"5","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 5"},"hover_event":{"action":"show_text","value":"5 traps"}},{"text":" ","color":"dark_blue"},{"text":"6","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 6"},"hover_event":{"action":"show_text","value":"6 traps"}},{"text":" ","color":"dark_blue"},{"text":"7","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 7"},"hover_event":{"action":"show_text","value":"7 traps"}},{"text":" ","color":"dark_blue"},{"text":"8","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 8"},"hover_event":{"action":"show_text","value":"8 traps"}},{"text":" ","color":"dark_blue"},{"text":"9","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 9"},"hover_event":{"action":"show_text","value":"9 traps (why)"}}, "\n\n",{"text":"Super Speed","color":"gold","hover_event":{"action":"show_text","value":"Enable or disable super speed for this mode."}},"\n",{"text":"on","color":"dark_green","click_event":{"action":"run_command","command":"/trigger ST____super_speed set 1"},"hover_event":{"action":"show_text","value":"Enable super speed"}},{"text":" ","color":"gray"},{"text":"off","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____super_speed set 0"},"hover_event":{"action":"show_text","value":"Disable super speed"}}, "\n\n",{"text":"Locator bar","color":"gold","hover_event":{"action":"show_text","value":"Enable or disable the locator bar for runners."}},"\n",{"text":"enabled","color":"dark_green","click_event":{"action":"run_command","command":"/trigger ST____locator_bar set 1"},"hover_event":{"action":"show_text","value":"Enable locator bar"}},{"text":" ","color":"gray"},{"text":"disabled","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____locator_bar set 0"},"hover_event":{"action":"show_text","value":"Disable locator bar"}}, "\n\n",{"text":"Target tubby detection","color":"dark_red","hover_event":{"action":"show_text","value":"when a corrupted player goes after 1 specific runner over and over again. he is considered a \"target tubby\" this behavior is cringe and should be punished. how harsh are these punishments? "}},"\n",{"text":"off","click_event":{"action":"run_command","command":"/trigger ST____target_tubby_detection set 0"},"hover_event":{"action":"show_text","value":"no target tubby detection"}}," ",{"text":"minor","color":"blue","click_event":{"action":"run_command","command":"/trigger ST____target_tubby_detection set 1"},"hover_event":{"action":"show_text","value":"small penalty for targeting"}}," ",{"text":"major","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____target_tubby_detection set 2"},"hover_event":{"action":"show_text","value":"significant penalty for targeting"}}," ",{"text":"MAX","color":"red","click_event":{"action":"run_command","command":"/trigger ST____target_tubby_detection set 3"},"hover_event":{"action":"show_text","value":"genuinely unfair punishment for targeting"}}]]],title:"Cranked It Settings",author:"degebs and the giggle touch foundation"}]

# infection game mode book 
execute unless entity @s[nbt={Inventory:[{id:"minecraft:written_book",Slot:2b}]}] if score setting ST____game_mode matches 3 run item replace entity @a[team=party_lead] hotbar.2 with written_book[written_book_content={pages:[[[{"text":"Time of day","color":"gold"},"\n",{"text":"Day","color":"aqua","click_event":{"action":"run_command","command":"/trigger ST____time_of_day set 0"},"hover_event":{"action":"show_text","value":"set the time do day"}}," ",{"text":"Night","color":"gray","click_event":{"action":"run_command","command":"/trigger ST____time_of_day set 1"},"hover_event":{"action":"show_text","value":"set the time to night"}},"\n\n",{"text":"Corruption rate","color":"dark_purple","hover_event":{"action":"show_text","value":"how fast does the corruption accumulate "}},"\n",{"text":"1","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 1"},"hover_event":{"action":"show_text","value":"1 corruption % per 1 second"}},{"text":" ","color":"dark_purple"},{"text":"2","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 2"},"hover_event":{"action":"show_text","value":"1 corruption % per 2 second"}},{"text":" ","color":"dark_purple"},{"text":"3","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 3"},"hover_event":{"action":"show_text","value":"1 corruption % per 3 second"}},{"text":" ","color":"dark_purple"},{"text":"4","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 4"},"hover_event":{"action":"show_text","value":"1 corruption % per 4 second"}},{"text":" ","color":"dark_purple"},{"text":"5","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 5"},"hover_event":{"action":"show_text","value":"1 corruption % per 5 second"}},{"text":" ","color":"dark_purple"},{"text":"6","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 6"},"hover_event":{"action":"show_text","value":"1 corruption % per 6 second"}},{"text":" ","color":"dark_purple"},{"text":"7","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 7"},"hover_event":{"action":"show_text","value":"1 corruption % per 7 second"}},{"text":" ","color":"dark_purple"},{"text":"8","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 8"},"hover_event":{"action":"show_text","value":"1 corruption % per 8 second"}},{"text":" ","color":"dark_purple"},{"text":"9","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 9"},"hover_event":{"action":"show_text","value":"1 corruption % per 9 second"}},{"text":" ","color":"dark_purple"},{"text":"10","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 10"},"hover_event":{"action":"show_text","value":"1 corruption % per 10 second"}},"\n\n",{"text":"Corruption stun","color":"light_purple","hover_event":{"action":"show_text","value":"a player who gets corrupted starts in a stunned state. how long is it?"}},"\n",{"text":"1 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 1"},"hover_event":{"action":"show_text","value":"1 second stun"}},{"text":"2 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 2"},"hover_event":{"action":"show_text","value":"2 second stun"}},{"text":"3 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 3"},"hover_event":{"action":"show_text","value":"3 second stun"}},{"text":"4 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 4"},"hover_event":{"action":"show_text","value":"4 second stun"}},{"text":"5 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 5"},"hover_event":{"action":"show_text","value":"5 second stun"}},{"text":"6 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 6"},"hover_event":{"action":"show_text","value":"6 second stun"}},{"text":"7 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 7"},"hover_event":{"action":"show_text","value":"7 second stun"}},{"text":"8 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 8"},"hover_event":{"action":"show_text","value":"8 second stun"}},{"text":"9 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 9"},"hover_event":{"action":"show_text","value":"9 second stun"}},{"text":"10","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 10"},"hover_event":{"action":"show_text","value":"10 second stun"}},"\n\n",{"text":"Max health","color":"red","hover_event":{"action":"show_text","value":"how many hearts do the runners get?"}},"\n",{"text":"1 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 1"},"hover_event":{"action":"show_text","value":"one"}},{"text":"2 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 2"},"hover_event":{"action":"show_text","value":"two"}},{"text":"3 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 3"},"hover_event":{"action":"show_text","value":"three"}},{"text":"4 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 4"},"hover_event":{"action":"show_text","value":"four"}},{"text":"5 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 5"},"hover_event":{"action":"show_text","value":"five"}},{"text":"6 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 6"},"hover_event":{"action":"show_text","value":"six"}},{"text":"7 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 7"},"hover_event":{"action":"show_text","value":"seven"}},{"text":"8 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 8"},"hover_event":{"action":"show_text","value":"eight"}},{"text":"9 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 9"},"hover_event":{"action":"show_text","value":"nine"}},{"text":"10","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 10"},"hover_event":{"action":"show_text","value":"ten"}}]],[[{"text":"max traps","color":"red","hover_event":{"action":"show_text","value":"the maximum amount of traps you can place"}},"\n",{"text":"0","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 0"},"hover_event":{"action":"show_text","value":"no traps"}},{"text":" ","color":"dark_blue"},{"text":"1","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 1"},"hover_event":{"action":"show_text","value":"1 trap"}},{"text":" ","color":"dark_blue"},{"text":"2","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 2"},"hover_event":{"action":"show_text","value":"2 traps"}},{"text":" ","color":"dark_blue"},{"text":"3","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 3"},"hover_event":{"action":"show_text","value":"3 traps"}},{"text":" ","color":"dark_blue"},{"text":"4","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 4"},"hover_event":{"action":"show_text","value":"4 traps"}},{"text":" ","color":"dark_blue"},{"text":"5","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 5"},"hover_event":{"action":"show_text","value":"5 traps"}},{"text":" ","color":"dark_blue"},{"text":"6","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 6"},"hover_event":{"action":"show_text","value":"6 traps"}},{"text":" ","color":"dark_blue"},{"text":"7","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 7"},"hover_event":{"action":"show_text","value":"7 traps"}},{"text":" ","color":"dark_blue"},{"text":"8","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 8"},"hover_event":{"action":"show_text","value":"8 traps"}},{"text":" ","color":"dark_blue"},{"text":"9","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 9"},"hover_event":{"action":"show_text","value":"9 traps (why)"}}, "\n\n",{"text":"Locator bar","color":"gold","hover_event":{"action":"show_text","value":"Enable or disable the locator bar for runners."}},"\n",{"text":"enabled","color":"dark_green","click_event":{"action":"run_command","command":"/trigger ST____locator_bar set 1"},"hover_event":{"action":"show_text","value":"Enable locator bar"}},{"text":" ","color":"gray"},{"text":"disabled","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____locator_bar set 0"},"hover_event":{"action":"show_text","value":"Disable locator bar"}}, "\n\n",{"text":"Regeneration","color":"dark_aqua","hover_event":{"action":"show_text","value":"do hearts slowly regenerate over time?"}},"\n",{"text":"on","color":"dark_green","click_event":{"action":"run_command","command":"/trigger ST____nautral_regen set 0"},"hover_event":{"action":"show_text","value":"on"}},{"text":" ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____nautral_regen set 0"},"hover_event":{"action":"show_text","value":"on"}},{"text":"off","click_event":{"action":"run_command","command":"/trigger ST____nautral_regen set 1"},"hover_event":{"action":"show_text","value":"off"}}, "\n\n",{"text":"Runner name tags","color":"green","hover_event":{"action":"show_text","value":"Should runners have visible name tags?"}},"\n",{"text":"disabled","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____runner_name_tags set 1"},"hover_event":{"action":"show_text","value":"hide runner name tags"}},{"text":" ","color":"gray"},{"text":"enabled","color":"dark_green","click_event":{"action":"run_command","command":"/trigger ST____runner_name_tags set 0"},"hover_event":{"action":"show_text","value":"show runner name tags"}}]]],title:"Infection Settings",author:"degebs and the giggle touch foundation"}]


# call of corrupted game mode book 
execute unless entity @s[nbt={Inventory:[{id:"minecraft:written_book",Slot:2b}]}] if score setting ST____game_mode matches 4 run item replace entity @a[team=party_lead] hotbar.2 with written_book[written_book_content={pages:[[[{"text":"Time of day","color":"gold"},"\n",{"text":"Day","color":"aqua","click_event":{"action":"run_command","command":"/trigger ST____time_of_day set 0"},"hover_event":{"action":"show_text","value":"set the time do day"}}," ",{"text":"Night","color":"gray","click_event":{"action":"run_command","command":"/trigger ST____time_of_day set 1"},"hover_event":{"action":"show_text","value":"set the time to night"}},"\n\n",{"text":"Corruption rate","color":"dark_purple","hover_event":{"action":"show_text","value":"how fast does the corruption accumulate "}},"\n",{"text":"1","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 1"},"hover_event":{"action":"show_text","value":"1 corruption % per 1 second"}},{"text":" ","color":"dark_purple"},{"text":"2","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 2"},"hover_event":{"action":"show_text","value":"1 corruption % per 2 second"}},{"text":" ","color":"dark_purple"},{"text":"3","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 3"},"hover_event":{"action":"show_text","value":"1 corruption % per 3 second"}},{"text":" ","color":"dark_purple"},{"text":"4","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 4"},"hover_event":{"action":"show_text","value":"1 corruption % per 4 second"}},{"text":" ","color":"dark_purple"},{"text":"5","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 5"},"hover_event":{"action":"show_text","value":"1 corruption % per 5 second"}},{"text":" ","color":"dark_purple"},{"text":"6","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 6"},"hover_event":{"action":"show_text","value":"1 corruption % per 6 second"}},{"text":" ","color":"dark_purple"},{"text":"7","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 7"},"hover_event":{"action":"show_text","value":"1 corruption % per 7 second"}},{"text":" ","color":"dark_purple"},{"text":"8","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 8"},"hover_event":{"action":"show_text","value":"1 corruption % per 8 second"}},{"text":" ","color":"dark_purple"},{"text":"9","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 9"},"hover_event":{"action":"show_text","value":"1 corruption % per 9 second"}},{"text":" ","color":"dark_purple"},{"text":"10","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 10"},"hover_event":{"action":"show_text","value":"1 corruption % per 10 second"}},"\n\n",{"text":"Manifestation probability","color":"light_purple","hover_event":{"action":"show_text","value":"Chance for manifestation to occur."}},"\n",{"text":"90% ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 90"},"hover_event":{"action":"show_text","value":"90% chance"}},{"text":"80% ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 80"},"hover_event":{"action":"show_text","value":"80% chance"}},{"text":"70% ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 70"},"hover_event":{"action":"show_text","value":"70% chance"}},{"text":"60% ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 60"},"hover_event":{"action":"show_text","value":"60% chance"}},{"text":"50% ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 50"},"hover_event":{"action":"show_text","value":"50% chance"}},{"text":"40% ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 40"},"hover_event":{"action":"show_text","value":"40% chance"}},{"text":"30% ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 30"},"hover_event":{"action":"show_text","value":"30% chance"}},{"text":"20% ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 20"},"hover_event":{"action":"show_text","value":"20% chance"}},{"text":"10%","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 10"},"hover_event":{"action":"show_text","value":"10% chance"}},"\n\n",{"text":"Max health","color":"red","hover_event":{"action":"show_text","value":"how many hearts do the runners get?"}},"\n",{"text":"1 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 1"},"hover_event":{"action":"show_text","value":"one"}},{"text":"2 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 2"},"hover_event":{"action":"show_text","value":"two"}},{"text":"3 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 3"},"hover_event":{"action":"show_text","value":"three"}},{"text":"4 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 4"},"hover_event":{"action":"show_text","value":"four"}},{"text":"5 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 5"},"hover_event":{"action":"show_text","value":"five"}},{"text":"6 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 6"},"hover_event":{"action":"show_text","value":"six"}},{"text":"7 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 7"},"hover_event":{"action":"show_text","value":"seven"}},{"text":"8 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 8"},"hover_event":{"action":"show_text","value":"eight"}},{"text":"9 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 9"},"hover_event":{"action":"show_text","value":"nine"}},{"text":"10","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 10"},"hover_event":{"action":"show_text","value":"ten"}}]],[[{"text":"max traps","color":"red","hover_event":{"action":"show_text","value":"the maximum amount of traps you can place"}},"\n",{"text":"0","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 0"},"hover_event":{"action":"show_text","value":"no traps"}},{"text":" ","color":"dark_blue"},{"text":"1","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 1"},"hover_event":{"action":"show_text","value":"1 trap"}},{"text":" ","color":"dark_blue"},{"text":"2","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 2"},"hover_event":{"action":"show_text","value":"2 traps"}},{"text":" ","color":"dark_blue"},{"text":"3","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 3"},"hover_event":{"action":"show_text","value":"3 traps"}},{"text":" ","color":"dark_blue"},{"text":"4","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 4"},"hover_event":{"action":"show_text","value":"4 traps"}},{"text":" ","color":"dark_blue"},{"text":"5","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 5"},"hover_event":{"action":"show_text","value":"5 traps"}},{"text":" ","color":"dark_blue"},{"text":"6","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 6"},"hover_event":{"action":"show_text","value":"6 traps"}},{"text":" ","color":"dark_blue"},{"text":"7","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 7"},"hover_event":{"action":"show_text","value":"7 traps"}},{"text":" ","color":"dark_blue"},{"text":"8","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 8"},"hover_event":{"action":"show_text","value":"8 traps"}},{"text":" ","color":"dark_blue"},{"text":"9","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 9"},"hover_event":{"action":"show_text","value":"9 traps (why)"}}, "\n\n",{"text":"Dificulty","color":"dark_purple","hover_event":{"action":"show_text","value":"Set the difficulty for Call of Corrupted."}},"\n",{"text":"easy","color":"green","click_event":{"action":"run_command","command":"/trigger ST____COC_difuculty set 0"},"hover_event":{"action":"show_text","value":"Easy"}},{"text":" ","color":"gray"},{"text":"medium","color":"gold","click_event":{"action":"run_command","command":"/trigger ST____COC_difuculty set 1"},"hover_event":{"action":"show_text","value":"Medium"}},{"text":" ","color":"gray"},{"text":"hard","color":"red","click_event":{"action":"run_command","command":"/trigger ST____COC_difuculty set 2"},"hover_event":{"action":"show_text","value":"Hard"}},"\n\n",{"text":"Regeneration","color":"dark_aqua","hover_event":{"action":"show_text","value":"do hearts slowly regenerate over time?"}},"\n",{"text":"on","color":"dark_green","click_event":{"action":"run_command","command":"/trigger ST____nautral_regen set 0"},"hover_event":{"action":"show_text","value":"on"}},{"text":" ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____nautral_regen set 0"},"hover_event":{"action":"show_text","value":"on"}},{"text":"off","click_event":{"action":"run_command","command":"/trigger ST____nautral_regen set 1"},"hover_event":{"action":"show_text","value":"off"}}, "\n\n",{"text":"Runner name tags","color":"green","hover_event":{"action":"show_text","value":"Should runners have visible name tags?"}},"\n",{"text":"disabled","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____runner_name_tags set 1"},"hover_event":{"action":"show_text","value":"hide runner name tags"}},{"text":" ","color":"gray"},{"text":"enabled","color":"dark_green","click_event":{"action":"run_command","command":"/trigger ST____runner_name_tags set 0"},"hover_event":{"action":"show_text","value":"show runner name tags"}}, "\n\n",{"text":"Locator bar","color":"gold","hover_event":{"action":"show_text","value":"Enable or disable the locator bar for runners."}},"\n",{"text":"enabled","color":"dark_green","click_event":{"action":"run_command","command":"/trigger ST____locator_bar set 1"},"hover_event":{"action":"show_text","value":"Enable locator bar"}},{"text":" ","color":"gray"},{"text":"disabled","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____locator_bar set 0"},"hover_event":{"action":"show_text","value":"Disable locator bar"}}]]],title:"Call of corrupted Settings",author:"degebs and the giggle touch foundation"}]

# class swappers book
execute unless entity @s[nbt={Inventory:[{id:"minecraft:written_book",Slot:2b}]}] if score setting ST____game_mode matches 5 run item replace entity @a[team=party_lead] hotbar.2 with written_book[written_book_content={pages:[[[{"text":"Time of day","color":"gold"},"\n",{"text":"Day","color":"aqua","click_event":{"action":"run_command","command":"/trigger ST____time_of_day set 0"},"hover_event":{"action":"show_text","value":"set the time do day"}}," ",{"text":"Night","color":"gray","click_event":{"action":"run_command","command":"/trigger ST____time_of_day set 1"},"hover_event":{"action":"show_text","value":"set the time to night"}},"\n\n",{"text":"Corruption rate","color":"dark_purple","hover_event":{"action":"show_text","value":"how fast does the corruption accumulate "}},"\n",{"text":"1","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 1"},"hover_event":{"action":"show_text","value":"1 corruption % per 1 second"}},{"text":" ","color":"dark_purple"},{"text":"2","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 2"},"hover_event":{"action":"show_text","value":"1 corruption % per 2 second"}},{"text":" ","color":"dark_purple"},{"text":"3","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 3"},"hover_event":{"action":"show_text","value":"1 corruption % per 3 second"}},{"text":" ","color":"dark_purple"},{"text":"4","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 4"},"hover_event":{"action":"show_text","value":"1 corruption % per 4 second"}},{"text":" ","color":"dark_purple"},{"text":"5","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 5"},"hover_event":{"action":"show_text","value":"1 corruption % per 5 second"}},{"text":" ","color":"dark_purple"},{"text":"6","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 6"},"hover_event":{"action":"show_text","value":"1 corruption % per 6 second"}},{"text":" ","color":"dark_purple"},{"text":"7","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 7"},"hover_event":{"action":"show_text","value":"1 corruption % per 7 second"}},{"text":" ","color":"dark_purple"},{"text":"8","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 8"},"hover_event":{"action":"show_text","value":"1 corruption % per 8 second"}},{"text":" ","color":"dark_purple"},{"text":"9","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 9"},"hover_event":{"action":"show_text","value":"1 corruption % per 9 second"}},{"text":" ","color":"dark_purple"},{"text":"10","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____corruption_rate set 10"},"hover_event":{"action":"show_text","value":"1 corruption % per 10 second"}},"\n\n",{"text":"Corruption stun","color":"light_purple","hover_event":{"action":"show_text","value":"a player who gets corrupted starts in a stunned state. how long is it?"}},"\n",{"text":"1 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 1"},"hover_event":{"action":"show_text","value":"1 second stun"}},{"text":"2","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 2"},"hover_event":{"action":"show_text","value":"2 second stun"}},{"text":" ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 2"},"hover_event":{"action":"show_text","value":"2 second stun"}},{"text":"3 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 3"},"hover_event":{"action":"show_text","value":"3 second stun"}},{"text":"4 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 4"},"hover_event":{"action":"show_text","value":"4 second stun"}},{"text":"5 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 5"},"hover_event":{"action":"show_text","value":"5 second stun"}},{"text":"6 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 6"},"hover_event":{"action":"show_text","value":"6 second stun"}},{"text":"7 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 7"},"hover_event":{"action":"show_text","value":"7 second stun"}},{"text":"8 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 8"},"hover_event":{"action":"show_text","value":"8 second stun"}},{"text":"9 ","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 9"},"hover_event":{"action":"show_text","value":"9 second stun"}},{"text":"10","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____initial_corruption_stun set 10"},"hover_event":{"action":"show_text","value":"10 second stun"}},"\n\n",{"text":"Max health","color":"red","hover_event":{"action":"show_text","value":"how many hearts do the runners get?"}},"\n",{"text":"1 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 1"},"hover_event":{"action":"show_text","value":"one"}},{"text":"2 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 2"},"hover_event":{"action":"show_text","value":"two"}},{"text":"3 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 3"},"hover_event":{"action":"show_text","value":"three"}},{"text":"4 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 4"},"hover_event":{"action":"show_text","value":"four"}},{"text":"5 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 5"},"hover_event":{"action":"show_text","value":"five"}},{"text":"6 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 6"},"hover_event":{"action":"show_text","value":"six"}},{"text":"7 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 7"},"hover_event":{"action":"show_text","value":"seven"}},{"text":"8 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 8"},"hover_event":{"action":"show_text","value":"eight"}},{"text":"9 ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 9"},"hover_event":{"action":"show_text","value":"nine"}},{"text":"10","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____max_health set 10"},"hover_event":{"action":"show_text","value":"ten"}},"\n\n",{"text":"Regeneration","color":"dark_aqua","hover_event":{"action":"show_text","value":"do hearts slowly regenerate over time?"}},"\n",{"text":"on","color":"dark_green","click_event":{"action":"run_command","command":"/trigger ST____nautral_regen set 0"},"hover_event":{"action":"show_text","value":"on"}},{"text":" ","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____nautral_regen set 0"},"hover_event":{"action":"show_text","value":"on"}},{"text":"off","click_event":{"action":"run_command","command":"/trigger ST____nautral_regen set 1"},"hover_event":{"action":"show_text","value":"off"}}," "]],[[{"text":"max traps","color":"red","hover_event":{"action":"show_text","value":"the maximum amount of traps you can place"}},"\n",{"text":"0","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 0"},"hover_event":{"action":"show_text","value":"no traps"}},{"text":" ","color":"dark_blue"},{"text":"1","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 1"},"hover_event":{"action":"show_text","value":"1 trap"}},{"text":" ","color":"dark_blue"},{"text":"2","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 2"},"hover_event":{"action":"show_text","value":"2 traps"}},{"text":" ","color":"dark_blue"},{"text":"3","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 3"},"hover_event":{"action":"show_text","value":"3 traps"}},{"text":" ","color":"dark_blue"},{"text":"4","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 4"},"hover_event":{"action":"show_text","value":"4 traps"}},{"text":" ","color":"dark_blue"},{"text":"5","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 5"},"hover_event":{"action":"show_text","value":"5 traps"}},{"text":" ","color":"dark_blue"},{"text":"6","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 6"},"hover_event":{"action":"show_text","value":"6 traps"}},{"text":" ","color":"dark_blue"},{"text":"7","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 7"},"hover_event":{"action":"show_text","value":"7 traps"}},{"text":" ","color":"dark_blue"},{"text":"8","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 8"},"hover_event":{"action":"show_text","value":"8 traps"}},{"text":" ","color":"dark_blue"},{"text":"9","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____max_traps set 9"},"hover_event":{"action":"show_text","value":"9 traps (why)"}}, "\n\n",{"text":"Locator bar","color":"gold","hover_event":{"action":"show_text","value":"Enable or disable the locator bar for runners."}},"\n",{"text":"enabled","color":"dark_green","click_event":{"action":"run_command","command":"/trigger ST____locator_bar set 1"},"hover_event":{"action":"show_text","value":"Enable locator bar"}},{"text":" ","color":"gray"},{"text":"disabled","color":"dark_red","click_event":{"action":"run_command","command":"/trigger ST____locator_bar set 0"},"hover_event":{"action":"show_text","value":"Disable locator bar"}}, "\n\n",{"text":"Target tubby detection","color":"dark_red","hover_event":{"action":"show_text","value":"when a corrupted player goes after 1 specific runner over and over again. he is considered a \"target tubby\" this behavior is cringe and should be punished. how harsh are these punishments? "}},"\n",{"text":"off","click_event":{"action":"run_command","command":"/trigger ST____target_tubby_detection set 0"},"hover_event":{"action":"show_text","value":"no target tubby detection"}}," ",{"text":"minor","color":"blue","click_event":{"action":"run_command","command":"/trigger ST____target_tubby_detection set 1"},"hover_event":{"action":"show_text","value":"small penalty for targeting"}}," ",{"text":"major","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____target_tubby_detection set 2"},"hover_event":{"action":"show_text","value":"significant penalty for targeting"}}," ",{"text":"MAX","color":"red","click_event":{"action":"run_command","command":"/trigger ST____target_tubby_detection set 3"},"hover_event":{"action":"show_text","value":"genuinely unfair punishment for targeting"}}]]],title:"Class Swappers Settings",author:"degebs and the giggle touch foundation"}]

#==========================================================================================




#==========================================================================================
# the party leader game mode book
execute unless entity @s[nbt={Inventory:[{id:"minecraft:written_book",Slot:3b}]}] run clear @s written_book

execute unless entity @s[nbt={Inventory:[{id:"minecraft:written_book",Slot:3b}]}] run kill @e[type=item,nbt={Item:{id:"minecraft:written_book"}}]

execute unless entity @s[nbt={Inventory:[{id:"minecraft:written_book",Slot:3b}]}] run item replace entity @a[team=party_lead] hotbar.3 with written_book[written_book_content={pages:[[["GAME MODE:\n\n",{"text":"CORRUPT TAG","color":"dark_purple","click_event":{"action":"run_command","command":"/trigger ST____game_mode set 0"},"hover_event":{"action":"show_text","value":["One player becomes ",{"text":"Corrupted ","color":"dark_purple"},"and must tag someone before it completely kills them. The ",{"text":"Runners","color":"gold"}," must run away as the ",{"text":"Corrupted","color":"dark_purple"}," player becomes more powerful.\n \n",{"text":"- Only 1 corrupted player\n- Corruption transfers when tagged\n- Only 1 winner","color":"dark_aqua"}]}},"\n\n",{"text":"HIDE AND REAP","color":"red","click_event":{"action":"run_command","command":"/trigger ST____game_mode set 1"},"hover_event":{"action":"show_text","value":["One player becomes ",{"text":"Corrupted","color":"dark_purple"}," and must hunt down all the ",{"text":"Runners","color":"gold"}," before they become too ",{"text":"Corrupted","color":"dark_purple"}," and die. The ",{"text":"Runners","color":"gold"}," must hide, for if they get hit they die.\nIt's like hide and seek.\n\n",{"text":"- Only 1 corrupted player\n- Corruption does not transfer\n- Multiple winners\n- Getting hit means you die","color":"dark_aqua"},"\n "]}},"\n\n",{"text":"CRANKED IT!","color":"gold","click_event":{"action":"run_command","command":"/trigger ST____game_mode set 2"},"hover_event":{"action":"show_text","value":["One player becomes ",{"text":"Corrupted ","color":"dark_purple"},"and must tag someone before it completely kills them. The ",{"text":"Runners","color":"gold"}," must run away as the ",{"text":"Corrupted","color":"dark_purple"}," player becomes more powerful. Except in this game mode, everyone can be super fast with random buffs cranking their way through everyone at the cost of faster corruption for all.\n\n",{"text":"- Only 1 corrupted player\n- Corruption transfers when tagged\n- Only 1 winner\n- All players slowly get corrupted\n- Fast","color":"dark_aqua"}]}},"\n\n",{"text":"INFECTION","color":"light_purple","click_event":{"action":"run_command","command":"/trigger ST____game_mode set 3"},"hover_event":{"action":"show_text","value":["One player becomes ",{"text":"Corrupted ","color":"dark_purple"},"and must assimilate all ",{"text":"Runners","color":"gold"},". The ",{"text":"Runners","color":"gold"}," must survive until all ",{"text":"Corrupted","color":"dark_purple"}," players die simultaneously.\n\n",{"text":"- Multiple corrupted players\n- Corruption spreads when tagged\n- Multiple winners","color":"dark_aqua"},"\n "]}},"\n\n",{"text":"CALL OF CORRUPTED: ZOMBIE SURVIVAL","color":"dark_blue","click_event":{"action":"run_command","command":"/trigger ST____game_mode set 4"},"hover_event":{"action":"show_text","value":["Zombies are spawned in by the aetherial ",{"text":"Corrupted","color":"dark_purple"}," player. The ",{"text":"Survivors","color":"gold"}," must hold out until the ",{"text":"Corrupted","color":"dark_purple"}," player becomes physical, only then can the ",{"text":"Survivors","color":"gold"}," attack the ",{"text":"Corrupted","color":"dark_purple"}," player and win. Waves get progressively harder.\n",{"text":"Survivors","color":"gold"}," may get new one-time use items.\nIt's like Call of Duty Zombies.\n\n",{"text":"- 1 corrupted player with 2 forms\n- Corruption kills if tagged\n- No winners, see how long you can last\n- Lots of mobs","color":"dark_aqua"},"\n "]}},"\n\n",{"text":"CLASS SWAPPERS","color":"dark_green","click_event":{"action":"run_command","command":"/trigger ST____game_mode set 5"},"hover_event":{"action":"show_text","value":["One player becomes ",{"text":"Corrupted ","color":"dark_purple"},"and must tag someone before it completely kills them. The ",{"text":"Runners","color":"gold"}," must run away as the ",{"text":"Corrupted","color":"dark_purple"}," player becomes more powerful. you class will change every time you get tagged. \n \n",{"text":"- random class\n- Corruption transfers when tagged\n- Only 1 winner","color":"dark_aqua"}]}}]]],title:"GAME MODE",author:"Degebs"}]

# for the realese if we cannot get the call of corrupted game mode done in time. we will have to use an alternative game mode book in whitch call
# of corrupted is disabled

#==========================================================================================
# when the party leader drops the end crystal he will get 2 arrows, up and down.
# they will be managed here
execute if score delay map_selection matches 0 if entity @e[type=item,nbt={Item:{id:"minecraft:arrow"}}] run function ctnv:one_time_function/selection_arrows
execute if score delay map_selection matches 0 if entity @e[type=item,nbt={Item:{id:"minecraft:spectral_arrow"}}] run function ctnv:one_time_function/selection_arrows
# lower the delay until its 0, used to not imidialty select an option (done for the same reason as described in the "start game" item drop)
execute unless score delay map_selection matches 0 run scoreboard players remove delay map_selection 1
scoreboard players enable @a[team=party_lead] map_selection


#=========================================================================================
# note that in this point of the game ONLY the party leader should have items
clear @a[team=!party_lead]
team leave @a[team=!party_lead]


scoreboard players set endgame state 0

scoreboard players set @a corruption 0

# disable the corruption counter shown beloow name
scoreboard objectives setdisplay below_name

#===========================================================================================================================================
# this command is suppost to take everyones health and set it to the max (its 0 by  default) and thats bad
scoreboard players operation @a health = @a[limit=1,sort=random,scores={ST____max_health=1..}] ST____max_health

#===========================================================================================================================================
#kill all traps
kill @e[tag=corrupted_t1_trap]
kill @e[tag=corrupted_t2_trap]
kill @e[tag=corrupted_t3_trap]
kill @e[tag=stunman_trap]
kill @e[tag=fishing_net_trap]
kill @e[tag=nuke]

# reset the knights attributes
attribute @r knockback_resistance base set 0
#===========================================================================================================================================
# rng for class selection

# do a little rng
scoreboard players add rng class 1
execute if score rng class matches 8.. run scoreboard players set rng class 1
execute if score rng class matches 3.. run scoreboard players add rng evil_class 1
execute if score rng evil_class matches 8.. run scoreboard players set rng evil_class 1
# the rng cant go beond 7 because there are only 6 classes


# set everyones class selection cooldown to 0 this will be nessasary for picking a class properly in gamestate 1
scoreboard players set @a class_selection_cooldown 0
#===========================================================================================================================================
# cranked it rng

scoreboard players add time cranked_it_buff_delay 20
scoreboard players add rng cranked_it_buff_delay 1

execute if score rng cranked_it_buff_delay matches 6.. run scoreboard players set rng cranked_it_buff_delay 0

execute if score time cranked_it_buff_delay matches 3000.. run scoreboard players set time cranked_it_buff_delay 100

#===========================================================================================================================================
# visual feed back to interacting with the settings book
# there is a setting variable in every scoreboard objective, this is used to display the settings in the chat
# this works by dectecting a difference in the setting variable and the actual setting value, set by the scoreboard trigger value
# this give us 1 tick to display the message in the chat

#ST____nautral_regen
execute unless score setting ST____nautral_regen = @a[team=party_lead,limit=1] ST____nautral_regen if score setting ST____nautral_regen matches 1 run tellraw @a ["nautral regeneration: ",{"text":"enabled","color":"dark_green"}] 

execute unless score setting ST____nautral_regen = @a[team=party_lead,limit=1] ST____nautral_regen if score setting ST____nautral_regen matches 0 run tellraw @a ["nautral regeneration: ",{"text":"disabled","color":"dark_red"}]
scoreboard players operation setting ST____nautral_regen = @a[team=party_lead,limit=1] ST____nautral_regen

#ST____corruption rate

execute unless score setting ST____corruption_rate = @a[team=party_lead,limit=1] ST____corruption_rate unless score setting ST____game_mode matches 2 run tellraw @a ["corruption rate: 1 ",{"text":"corruption %","color":"dark_purple"}," per ",{"score":{"objective":"ST____corruption_rate","name":"@a[team=party_lead,limit=1]"}}," second(s)"]
execute unless score setting ST____corruption_rate = @a[team=party_lead,limit=1] ST____corruption_rate if score setting ST____game_mode matches 2 run tellraw @a ["corruption rate: 4 ",{"text":"corruption %","color":"dark_purple"}," per ",{"score":{"objective":"ST____corruption_rate","name":"@a[team=party_lead,limit=1]"}}," second(s)"]
scoreboard players operation setting ST____corruption_rate = @a[team=party_lead,limit=1] ST____corruption_rate

#ST____game_mode
# every selection will have a unique sound effect
execute unless score setting ST____game_mode = @a[team=party_lead,limit=1] ST____game_mode if score @a[team=party_lead,limit=1] ST____game_mode matches 0 run tellraw @a [{"text":"game mode: ","color":"green"},{"text":"Corrupt Tag","color":"dark_purple"}]
execute unless score setting ST____game_mode = @a[team=party_lead,limit=1] ST____game_mode if score @a[team=party_lead,limit=1] ST____game_mode matches 1 run tellraw @a [{"text":"game mode: ","color":"green"},{"text":"Hide and Reap","color":"red"}]
execute unless score setting ST____game_mode = @a[team=party_lead,limit=1] ST____game_mode if score @a[team=party_lead,limit=1] ST____game_mode matches 2 run tellraw @a [{"text":"game mode: ","color":"green"},{"text":"Cranked It!","color":"gold"}]
execute unless score setting ST____game_mode = @a[team=party_lead,limit=1] ST____game_mode if score @a[team=party_lead,limit=1] ST____game_mode matches 3 run tellraw @a [{"text":"game mode: ","color":"green"},{"text":"Infection","color":"light_purple"}]
execute unless score setting ST____game_mode = @a[team=party_lead,limit=1] ST____game_mode if score @a[team=party_lead,limit=1] ST____game_mode matches 4 run tellraw @a [{"text":"game mode: ","color":"green"},{"text":"Call of Corrupted: zombie survival","color":"blue"}]
execute unless score setting ST____game_mode = @a[team=party_lead,limit=1] ST____game_mode if score @a[team=party_lead,limit=1] ST____game_mode matches 5 run tellraw @a [{"text":"game mode: ","color":"green"},{"text":"Class Swappers","color":"dark_green"}]

execute unless score setting ST____game_mode = @a[team=party_lead,limit=1] ST____game_mode if score @a[team=party_lead,limit=1] ST____game_mode matches 0 run title @a subtitle [{"text":"game mode: ","color":"green"},{"text":"Corrupt Tag","color":"dark_purple"}]
execute unless score setting ST____game_mode = @a[team=party_lead,limit=1] ST____game_mode if score @a[team=party_lead,limit=1] ST____game_mode matches 0 run title @a title [" "]

execute unless score setting ST____game_mode = @a[team=party_lead,limit=1] ST____game_mode if score @a[team=party_lead,limit=1] ST____game_mode matches 1 run title @a subtitle [{"text":"game mode: ","color":"green"},{"text":"Hide and Reap","color":"red"}]
execute unless score setting ST____game_mode = @a[team=party_lead,limit=1] ST____game_mode if score @a[team=party_lead,limit=1] ST____game_mode matches 1 run title @a title [" "]

execute unless score setting ST____game_mode = @a[team=party_lead,limit=1] ST____game_mode if score @a[team=party_lead,limit=1] ST____game_mode matches 2 run title @a subtitle [{"text":"game mode: ","color":"green"},{"text":"Cranked It!","color":"gold"}]
execute unless score setting ST____game_mode = @a[team=party_lead,limit=1] ST____game_mode if score @a[team=party_lead,limit=1] ST____game_mode matches 2 run title @a title [" "]

execute unless score setting ST____game_mode = @a[team=party_lead,limit=1] ST____game_mode if score @a[team=party_lead,limit=1] ST____game_mode matches 3 run title @a subtitle [{"text":"game mode: ","color":"green"},{"text":"Infection","color":"light_purple"}]
execute unless score setting ST____game_mode = @a[team=party_lead,limit=1] ST____game_mode if score @a[team=party_lead,limit=1] ST____game_mode matches 3 run title @a title [" "]

execute unless score setting ST____game_mode = @a[team=party_lead,limit=1] ST____game_mode if score @a[team=party_lead,limit=1] ST____game_mode matches 4 run title @a title [{"text":"game mode: ","color":"green"},{"text":"Call of Corrupted","color":"blue"}]
execute unless score setting ST____game_mode = @a[team=party_lead,limit=1] ST____game_mode if score @a[team=party_lead,limit=1] ST____game_mode matches 4 run title @a subtitle [{"text":" ","color":"green"},{"text":"zombie survival","color":"blue"}]

execute unless score setting ST____game_mode = @a[team=party_lead,limit=1] ST____game_mode if score @a[team=party_lead,limit=1] ST____game_mode matches 5 run title @a subtitle [{"text":"game mode: ","color":"green"},{"text":"Class Swappers","color":"dark_green"}]
execute unless score setting ST____game_mode = @a[team=party_lead,limit=1] ST____game_mode if score @a[team=party_lead,limit=1] ST____game_mode matches 5 run title @a title [" "]

execute unless score setting ST____game_mode = @a[team=party_lead,limit=1] ST____game_mode if score @a[team=party_lead,limit=1] ST____game_mode matches 0 at @a run playsound minecraft:entity.wither.ambient master @a ~ ~ ~ 1 1 1
execute unless score setting ST____game_mode = @a[team=party_lead,limit=1] ST____game_mode if score @a[team=party_lead,limit=1] ST____game_mode matches 1 at @a run playsound minecraft:block.sculk_shrieker.shriek master @a ~ ~ ~ 1 1 1
execute unless score setting ST____game_mode = @a[team=party_lead,limit=1] ST____game_mode if score @a[team=party_lead,limit=1] ST____game_mode matches 2 at @a run playsound minecraft:entity.creeper.primed master @a ~ ~ ~ 1 1 1 
execute unless score setting ST____game_mode = @a[team=party_lead,limit=1] ST____game_mode if score @a[team=party_lead,limit=1] ST____game_mode matches 3 at @a run playsound minecraft:block.respawn_anchor.charge master @a ~ ~ ~ 1 0.5 1
execute unless score setting ST____game_mode = @a[team=party_lead,limit=1] ST____game_mode if score @a[team=party_lead,limit=1] ST____game_mode matches 4 at @a run playsound minecraft:ambient.cave master @a ~ ~ ~ 1 1 1 
execute unless score setting ST____game_mode = @a[team=party_lead,limit=1] ST____game_mode if score @a[team=party_lead,limit=1] ST____game_mode matches 5 at @a run playsound minecraft:block.enchantment_table.use master @a ~ ~ ~ 1 0.3 1

scoreboard players operation setting ST____game_mode = @a[team=party_lead,limit=1] ST____game_mode
# ui in the menu
# do in once per second for preformance reasons
execute if score setting ST____game_mode matches 0 if score tick time matches 1 run title @a actionbar [{"text":"game mode:","color":"white"},{"text":" Corrupt tag","color":"dark_purple"}]
execute if score setting ST____game_mode matches 1 if score tick time matches 1 run title @a actionbar [{"text":"game mode:","color":"white"},{"text":" Hide and reap","color":"red"}]
execute if score setting ST____game_mode matches 2 if score tick time matches 1 run title @a actionbar [{"text":"game mode:","color":"white"},{"text":" Cranked it!","color":"gold"}]
execute if score setting ST____game_mode matches 3 if score tick time matches 1 run title @a actionbar [{"text":"game mode:","color":"white"},{"text":" Infection","color":"light_purple"}]
execute if score setting ST____game_mode matches 4 if score tick time matches 1 run title @a actionbar [{"text":"game mode:","color":"white"},{"text":" Call of Corrupted","color":"dark_blue"}]
execute if score setting ST____game_mode matches 5 if score tick time matches 1 run title @a actionbar [{"text":"game mode:","color":"white"},{"text":" Class Swappers","color":"dark_green"}]





#ST____initial_corruption_stun
# if the game mode is call of corrupted, then use a different one
execute unless score setting ST____game_mode matches 4 run execute unless score setting ST____initial_corruption_stun = @a[team=party_lead,limit=1] ST____initial_corruption_stun run tellraw @a [{"text":" corruption","color":"dark_purple"}," ",{"text":"stun:","color":"dark_purple"},{"text":" ","color":"gray"},{"color":"gray","score":{"objective":"ST____initial_corruption_stun","name":"@a[team=party_lead,limit=1]"}},{"color":"gray","text":" second(s)"}]
execute unless score setting ST____game_mode matches 4 run scoreboard players operation setting ST____initial_corruption_stun = @a[team=party_lead,limit=1] ST____initial_corruption_stun

execute if score setting ST____game_mode matches 4 run execute unless score setting ST____initial_corruption_stun = @a[team=party_lead,limit=1] ST____initial_corruption_stun run tellraw @a [{"text":" corrupted manifestation","color":"dark_purple"}," ",{"text":"probability:","color":"dark_purple"},{"text":" ","color":"gray"},{"color":"gray","score":{"objective":"ST____initial_corruption_stun","name":"@a[team=party_lead,limit=1]"}},{"color":"gray","text":" %"}]
execute if score setting ST____game_mode matches 4 run scoreboard players operation setting ST____initial_corruption_stun = @a[team=party_lead,limit=1] ST____initial_corruption_stun

#ST____max_health
execute unless score setting ST____max_health = @a[team=party_lead,limit=1] ST____max_health run tellraw @a [{"text":"max health: ","color":"red"},{"score":{"objective":"ST____max_health","name":"@a[team=party_lead]"}}]
scoreboard players operation setting ST____max_health = @a[team=party_lead,limit=1] ST____max_health

#ST____max_traps
execute unless score setting ST____max_traps = @a[team=party_lead,limit=1] ST____max_traps run tellraw @a [{"text":"max traps: ","color":"blue"},{"score":{"objective":"ST____max_traps","name":"@a[team=party_lead]"}}]
scoreboard players operation setting ST____max_traps = @a[team=party_lead,limit=1] ST____max_traps

#ST____time_of_day
# this one is not needed. its effects are obious

#ST____target_tubby_detection

execute unless score setting ST____target_tubby_detection = @a[team=party_lead,limit=1] ST____target_tubby_detection if score @a[team=party_lead,limit=1] ST____target_tubby_detection matches 0 run tellraw @a ["target tubby detection: ",{"text":"disabled","color":"dark_red"}]

execute unless score setting ST____target_tubby_detection = @a[team=party_lead,limit=1] ST____target_tubby_detection if score @a[team=party_lead,limit=1] ST____target_tubby_detection matches 1 run tellraw @a ["target tubby detection: ",{"text":"enabled","color":"dark_green"}] 

execute unless score setting ST____target_tubby_detection = @a[team=party_lead,limit=1] ST____target_tubby_detection if score @a[team=party_lead,limit=1] ST____target_tubby_detection matches 2 run tellraw @a ["target tubby detection: ",{"text":"hyperactive","color":"green"}]

execute unless score setting ST____target_tubby_detection = @a[team=party_lead,limit=1] ST____target_tubby_detection if score @a[team=party_lead,limit=1] ST____target_tubby_detection matches 3 run tellraw @a ["target tubby detection: ",{"text":"extreme","color":"aqua"}]


scoreboard players operation setting ST____target_tubby_detection = @a[team=party_lead,limit=1] ST____target_tubby_detection

#ST____runner_name_tags
execute unless score setting ST____runner_name_tags = @a[team=party_lead,limit=1] ST____runner_name_tags if score setting ST____runner_name_tags matches 0 run tellraw @a ["runner name tags: ",{"text":"disabled","color":"dark_red"}]
execute unless score setting ST____runner_name_tags = @a[team=party_lead,limit=1] ST____runner_name_tags if score setting ST____runner_name_tags matches 1 run tellraw @a ["runner name tags: ",{"text":"enabled","color":"dark_green"}]

execute unless score setting ST____runner_name_tags = @a[team=party_lead,limit=1] ST____runner_name_tags if score setting ST____runner_name_tags matches 1 run team modify runners nametagVisibility always
execute unless score setting ST____runner_name_tags = @a[team=party_lead,limit=1] ST____runner_name_tags if score setting ST____runner_name_tags matches 0 run team modify runners nametagVisibility never

#ST____super_speed
execute unless score setting ST____super_speed = @a[team=party_lead,limit=1] ST____super_speed if score setting ST____super_speed matches 1 run tellraw @a ["super speed: ",{"text":"disabled","color":"dark_red"}]
execute unless score setting ST____super_speed = @a[team=party_lead,limit=1] ST____super_speed if score setting ST____super_speed matches 0 run tellraw @a ["super speed: ",{"text":"enabled","color":"dark_green"}]

scoreboard players operation setting ST____super_speed = @a[team=party_lead,limit=1] ST____super_speed

#ST____enable_runner_classes
execute unless score setting ST____enable_runner_classes = @a[team=party_lead,limit=1] ST____enable_runner_classes if score setting ST____enable_runner_classes matches 1 run tellraw @a ["runner classes: ",{"text":"disabled","color":"dark_red"}]
execute unless score setting ST____enable_runner_classes = @a[team=party_lead,limit=1] ST____enable_runner_classes if score setting ST____enable_runner_classes matches 0 run tellraw @a ["runner classes: ",{"text":"enabled","color":"dark_green"}]
scoreboard players operation setting ST____enable_runner_classes = @a[team=party_lead,limit=1] ST____enable_runner_classes


#ST____locator_bar
execute unless score setting ST____locator_bar = @a[team=party_lead,limit=1] ST____locator_bar if score setting ST____locator_bar matches 0 run tellraw @a ["locator bar: ",{"text":"enabled","color":"dark_green"}]
execute unless score setting ST____locator_bar = @a[team=party_lead,limit=1] ST____locator_bar if score setting ST____locator_bar matches 1 run tellraw @a ["locator bar: ",{"text":"disabled","color":"dark_red"}]
scoreboard players operation setting ST____locator_bar = @a[team=party_lead,limit=1] ST____locator_bar
# do the bar
execute if score setting ST____locator_bar matches 0 run gamerule locator_bar false
execute if score setting ST____locator_bar matches 1 run gamerule locator_bar true

#ST____COC_difuculty
execute unless score setting ST____COC_difuculty = @a[team=party_lead,limit=1] ST____COC_difuculty if score @a[team=party_lead,limit=1] ST____COC_difuculty matches 0 run tellraw @a ["difficulty: ",{"text":"easy","color":"green"}]
execute unless score setting ST____COC_difuculty = @a[team=party_lead,limit=1] ST____COC_difuculty if score @a[team=party_lead,limit=1] ST____COC_difuculty matches 1 run tellraw @a ["difficulty: ",{"text":"medium","color":"yellow"}]
execute unless score setting ST____COC_difuculty = @a[team=party_lead,limit=1] ST____COC_difuculty if score @a[team=party_lead,limit=1] ST____COC_difuculty matches 2 run tellraw @a ["difficulty: ",{"text":"hard","color":"red"}]
scoreboard players operation setting ST____COC_difuculty = @a[team=party_lead,limit=1] ST____COC_difuculty

# this one may be a bit controversial but it must be done
# if the game mode is not hide and reap, or infection then the runner name tags will be shown
execute if score setting ST____game_mode matches 0 run team modify runners nametagVisibility always
execute if score setting ST____game_mode matches 2 run team modify runners nametagVisibility always


scoreboard players operation setting ST____runner_name_tags = @a[team=party_lead,limit=1] ST____runner_name_tags
# if the game mode is NOT call of corrupted or hide and reap, then we gotta reset the corruption stun
execute if score setting ST____game_mode matches 0 run scoreboard players set @a[team=party_lead] ST____initial_corruption_stun 3
execute if score setting ST____game_mode matches 2 run scoreboard players set @a[team=party_lead] ST____initial_corruption_stun 3
execute if score setting ST____game_mode matches 3 run scoreboard players set @a[team=party_lead] ST____initial_corruption_stun 3
#==============================================================================================================
# lobby beacon invis
effect give @e[type=armadillo] invisibility infinite 1 true


#==============================================================================================================
#some more call of corrupted stuff
execute as @a run attribute @s scale base reset
execute as @a run attribute @s entity_interaction_range base reset
scoreboard objectives setdisplay list
# the corrupt manifestation is how long the corruption will last before the atherial corrupted becomes physical
# there is a setting for this. the higher the number the less time there is before manifestation
scoreboard players add corrupt_manifestation call_of_corrupted 120
# rng for the mob spawning
scoreboard players add rng spawn 1
execute if score rng spawn matches 100.. run scoreboard players set rng spawn 0
scoreboard players set reset runners_alive 0
kill @e[team=corrupted,type=!player]
effect clear @a speed
# there is a bug where the acrcher would not get his arrows if you played the call off corrupted game mode, then played another game mode.

# 90%
execute if score setting ST____initial_corruption_stun matches 90 if score corrupt_manifestation call_of_corrupted matches 1500.. run scoreboard players set corrupt_manifestation call_of_corrupted 1000

# 80%
execute if score setting ST____initial_corruption_stun matches 80 if score corrupt_manifestation call_of_corrupted matches 2500.. run scoreboard players set corrupt_manifestation call_of_corrupted 1000

# 70%
execute if score setting ST____initial_corruption_stun matches 70 if score corrupt_manifestation call_of_corrupted matches 3000.. run scoreboard players set corrupt_manifestation call_of_corrupted 1500

# 60%
execute if score setting ST____initial_corruption_stun matches 60 if score corrupt_manifestation call_of_corrupted matches 4000.. run scoreboard players set corrupt_manifestation call_of_corrupted 2000

# 50%
execute if score setting ST____initial_corruption_stun matches 50 if score corrupt_manifestation call_of_corrupted matches 5000.. run scoreboard players set corrupt_manifestation call_of_corrupted 2500

# 40%
execute if score setting ST____initial_corruption_stun matches 40 if score corrupt_manifestation call_of_corrupted matches 6000.. run scoreboard players set corrupt_manifestation call_of_corrupted 3000

# 30%
execute if score setting ST____initial_corruption_stun matches 30 if score corrupt_manifestation call_of_corrupted matches 8000.. run scoreboard players set corrupt_manifestation call_of_corrupted 3500

# 20%
execute if score setting ST____initial_corruption_stun matches 20 if score corrupt_manifestation call_of_corrupted matches 10000.. run scoreboard players set corrupt_manifestation call_of_corrupted 5000

# 10%
execute if score setting ST____initial_corruption_stun matches 10 if score corrupt_manifestation call_of_corrupted matches 15000.. run scoreboard players set corrupt_manifestation call_of_corrupted 5500

# almost 0%
execute if score corrupt_manifestation call_of_corrupted matches 16000.. run scoreboard players set corrupt_manifestation call_of_corrupted 1000


#==============================================================================================================
# new players WILL spawn at the loby beacon. no matter where they are when they logged off
# this teleports them to the beacon as soon as they join
execute as @a[scores={playtime=1}] run tp @s @e[tag=lobby,limit=1]


#=================================================================================================
# prevent reload spam
execute if score count reload_spam matches 2 run tellraw @a ["\n",{"text":"STOP","color":"red"},"\n",{"text":"did you know, there is no need to reload. you can become the party leader by typing:","color":"green"},"\n\n",{"text":"/function ctnv:leader","color":"white","click_event":{"action":"run_command","command":"/function ctnv:leader"},"hover_event":{"action":"show_text","value":"run the command /function ctnv:leader"}},"\n\n "]
execute if score count reload_spam matches 2 run scoreboard players add count reload_spam 1

execute if score count reload_spam matches 4 run tellraw @a ["\n",{"text":"STOP","color":"red"},"\n",{"text":"hey. i just told you not to do that. \ntype this instead","color":"green"},"\n\n",{"text":"/function ctnv:leader","color":"white","click_event":{"action":"run_command","command":"/function ctnv:leader"},"hover_event":{"action":"show_text","value":"run the command /function ctnv:leader"}},"\n\n "]
execute if score count reload_spam matches 4 run scoreboard players add count reload_spam 1

execute if score count reload_spam matches 6 run tellraw @a ["\n",{"text":"STOP","color":"red"},"\n",{"text":"bro just click the text box already!","color":"green"},"\n\n",{"text":"/function ctnv:leader","color":"white","click_event":{"action":"run_command","command":"/function ctnv:leader"},"hover_event":{"action":"show_text","value":"run the command /function ctnv:leader"}},"\n\n "]
execute if score count reload_spam matches 6 run scoreboard players add count reload_spam 1

execute if score count reload_spam matches 8 run tellraw @a ["\n",{"text":"STOP","color":"red"},"\n",{"text":"ok there is no way you are not the party leader at this point.","color":"green"},"\n\n",{"text":"/function ctnv:leader","color":"white","click_event":{"action":"run_command","command":"/function ctnv:leader"},"hover_event":{"action":"show_text","value":"run the command /function ctnv:leader"}},"\n\n "]
execute if score count reload_spam matches 8 run scoreboard players add count reload_spam 1

execute if score count reload_spam matches 10 run tellraw @a ["\n",{"text":"STOP","color":"red"},"\n",{"text":"JUST RUN THIS COMMAND","color":"green"},"\n\n",{"text":"/function ctnv:leader","color":"white","click_event":{"action":"run_command","command":"/function ctnv:leader"},"hover_event":{"action":"show_text","value":"run the command /function ctnv:leader"}},"\n\n",{"text":"OR ACCEPT THE FACT THAT YOU WILL NOT BE THE PARTY LEADER","color":"green"},"\n "]
execute if score count reload_spam matches 10 run scoreboard players add count reload_spam 1

execute if score count reload_spam matches 12 run tellraw @a ["\n",{"text":"STOP","color":"red"},"\n",{"text":"ok bro now i think you're doing this on purpose","color":"green"},"\n\n",{"text":"/function ctnv:leader","color":"white","click_event":{"action":"run_command","command":"/function ctnv:leader"},"hover_event":{"action":"show_text","value":"run the command /function ctnv:leader"}},"\n\n "]
execute if score count reload_spam matches 12 run scoreboard players add count reload_spam 1


execute if score count reload_spam matches 14 run tellraw @a ["\n",{"text":"STOP","color":"red"},"\n",{"text":"JUST","color":"green"},"\n\n",{"text":"/function ctnv:leader","color":"white","click_event":{"action":"run_command","command":"/function ctnv:leader"},"hover_event":{"action":"show_text","value":"run the command /function ctnv:leader"}},"\n\n "]
execute if score count reload_spam matches 14 run scoreboard players add count reload_spam 1


execute if score count reload_spam matches 16 run tellraw @a ["\n",{"text":"STOP","color":"red"},"\n",{"text":"STOP RELOADING","color":"green"},"\n\n",{"text":"/function ctnv:leader","color":"white","click_event":{"action":"run_command","command":"/function ctnv:leader"},"hover_event":{"action":"show_text","value":"run the command /function ctnv:leader"}},"\n\n "]
execute if score count reload_spam matches 16 run scoreboard players add count reload_spam 1

execute if score count reload_spam matches 18 run tellraw @a ["\n",{"text":"STOP","color":"red"},"\n",{"text":"THE","color":"green"},"\n\n",{"text":"/function ctnv:leader","color":"white","click_event":{"action":"run_command","command":"/function ctnv:leader"},"hover_event":{"action":"show_text","value":"run the command /function ctnv:leader"}},"\n\n "]
execute if score count reload_spam matches 18 run scoreboard players add count reload_spam 1

execute if score count reload_spam matches 20 run tellraw @a ["\n",{"text":"STOP","color":"red"},"\n",{"text":"DATAPACK","color":"green"},"\n\n",{"text":"/function ctnv:leader","color":"white","click_event":{"action":"run_command","command":"/function ctnv:leader"},"hover_event":{"action":"show_text","value":"run the command /function ctnv:leader"}},"\n\n "]
execute if score count reload_spam matches 20 run scoreboard players add count reload_spam 1


execute if score count reload_spam matches 22 run tellraw @a ["\n",{"text":"STOP","color":"red"},"\n",{"text":"I BEG OF YOU","color":"green"},"\n\n",{"text":"/function ctnv:leader","color":"white","click_event":{"action":"run_command","command":"/function ctnv:leader"},"hover_event":{"action":"show_text","value":"run the command /function ctnv:leader"}},"\n\n "]
execute if score count reload_spam matches 22 run scoreboard players add count reload_spam 1

execute if score count reload_spam matches 24 run tellraw @a ["\n",{"text":"STOP","color":"red"},"\n",{"text":"alright i get it its funny to reload the datapack over and over again. ha ha funny!","color":"green"},"\n\n",{"text":"/function ctnv:leader","color":"white","click_event":{"action":"run_command","command":"/function ctnv:leader"},"hover_event":{"action":"show_text","value":"run the command /function ctnv:leader"}},"\n\n",{"text":"just play the game already! who cares about the party leader","color":"green"}]
execute if score count reload_spam matches 24 run scoreboard players add count reload_spam 1


execute if score count reload_spam matches 26 run tellraw @a ["\n",{"text":"STOP","color":"red"},"\n\n",{"text":"i have just about had it with you","color":"green"},"\n\n",{"text":"/function ctnv:leader","color":"white","click_event":{"action":"run_command","command":"/function ctnv:leader"},"hover_event":{"action":"show_text","value":"run the command /function ctnv:leader"}},"\n\n "]
execute if score count reload_spam matches 26 run scoreboard players add count reload_spam 1

execute if score count reload_spam matches 28 run tellraw @a ["\n",{"text":"STOP","color":"red"},"\n\n",{"text":"i have just about had it with you","color":"green"},"\n\n",{"text":"/function ctnv:leader","color":"white","click_event":{"action":"run_command","command":"/function ctnv:leader"},"hover_event":{"action":"show_text","value":"run the command /function ctnv:leader"}},"\n\n "]
execute if score count reload_spam matches 28 run scoreboard players add count reload_spam 1

execute if score count reload_spam matches 30 run tellraw @a ["\n",{"text":"STOP","color":"red"},"\n\n",{"text":"i have just about had it with you","color":"green"},"\n\n",{"text":"/function ctnv:leader","color":"white","click_event":{"action":"run_command","command":"/function ctnv:leader"},"hover_event":{"action":"show_text","value":"run the command /function ctnv:leader"}},"\n\n "]
execute if score count reload_spam matches 30 run scoreboard players add count reload_spam 1

execute if score count reload_spam matches 32 run tellraw @a ["\n",{"text":"STOP","color":"red"},"\n\n",{"text":"pull that crap on me again and i will crash the game","color":"green"},"\n\n",{"text":"/function ctnv:leader","color":"white","click_event":{"action":"run_command","command":"/function ctnv:leader"},"hover_event":{"action":"show_text","value":"run the command /function ctnv:leader"}},"\n\n "]
execute if score count reload_spam matches 32 run scoreboard players add count reload_spam 1

execute if score count reload_spam matches 36 run tellraw @a ["\n",{"text":"STOP","color":"red"},"\n\n",{"text":"I AM WARNING YOU","color":"green"},"\n\n",{"text":"/function ctnv:leader","color":"white","click_event":{"action":"run_command","command":"/function ctnv:leader"},"hover_event":{"action":"show_text","value":"run the command /function ctnv:leader"}},"\n\n",{"text":"STOP RELOADING THE GAME","color":"green"}]
execute if score count reload_spam matches 36 run scoreboard players add count reload_spam 1

execute if score count reload_spam matches 38 run tellraw @a ["\n",{"text":"STOP","color":"red"},"\n\n",{"text":"I AM GONNA DO IT","color":"green"},"\n\n",{"text":"/function ctnv:leader","color":"white","click_event":{"action":"run_command","command":"/function ctnv:leader"},"hover_event":{"action":"show_text","value":"run the command /function ctnv:leader"}},"\n\n",{"text":"STOP RELOADING THE GAME","color":"green"}]
execute if score count reload_spam matches 38 run scoreboard players add count reload_spam 1

execute if score count reload_spam matches 40..60 run tellraw @a ["\n",{"text":"STOP","color":"red"},"\n\n",{"text":"ALRIGHT LET'S SEE HOW YOU LIKE IT! WHEN I SPAM THE RELOAD COMMAND","color":"green"},"\n\n",{"text":"/function ctnv:leader","color":"white","click_event":{"action":"run_command","command":"/function ctnv:leader"},"hover_event":{"action":"show_text","value":"run the command /function ctnv:leader"}},"\n "]
execute if score count reload_spam matches 40 run scoreboard players add count reload_spam 1

execute if score count reload_spam matches 41..100 run reload 

execute if score count reload_spam matches 100 run tellraw @a ["\n",{"text":"STOP","color":"red"},"\n\n",{"text":"THAT'S HOW IT FEELS!!!! THAT'S HOW! THAT IS WHAT YOU ARE DOING!!! SO CUT IT OUT!!!","color":"green"},"\n\n",{"text":"/function ctnv:leader","color":"white","click_event":{"action":"run_command","command":"/function ctnv:leader"},"hover_event":{"action":"show_text","value":"run the command /function ctnv:leader"}},"\n "]


execute if score count reload_spam matches 102 run tellraw @a ["\n",{"text":"STOP","color":"red"},"\n\n",{"text":"im done..\nnope!\nnot dealing with your crap anymore","color":"green"},"\n\n\n",{"text":"/function ctnv:leader","color":"white","click_event":{"action":"run_command","command":"/function ctnv:leader"},"hover_event":{"action":"show_text","value":"run the command /function ctnv:leader"}},"\n "]
execute if score count reload_spam matches 102 run scoreboard players add count reload_spam 1


#======================================================================================================================
#ensure that there is ONLY 1 life detector
scoreboard players reset count life_detector_count 
execute as @e[tag=life_detector] run scoreboard players add count life_detector_count 1
execute if score count life_detector_count matches 2.. run kill @e[tag=life_detector,limit=1,sort=nearest]
# this fixes the life detecor memory leak


#======================================================================================================================
# set up corrupted domain expantion. if it is not enabled here. then it wont work during the game
execute unless score enable corrupted_domain_enable matches 1 run function ctnv:corrupted_supercharge_ability/corrupted_domain_expantion_setup
scoreboard players set number_of_deititys corrupted_supercharge 0
# rng
scoreboard players add rng corrupted_domain_enable 1
execute if score rng corrupted_domain_enable matches 9.. run scoreboard players set rng corrupted_domain_enable 1

#======================================================================================================================
# this is for miner
execute as @a run attribute @s scale base set 1
execute as @a run attribute @s gravity base reset 